<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calendario de Vacaciones 2025</title>
<style>
  .month {
    display: inline-block;
    margin: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    overflow: hidden;
  }
  .month-name {
    background-color: #f2f2f2;
    padding: 10px;
    text-align: center;
    font-weight: bold;
  }
  .weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    padding: 10px;
    padding-right: 5px;
    font-weight: bold;
    margin-left: 10px;
  }
  .days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    padding: 10px;    
  }
  .day {
    text-align: center;
    padding: 5px;
    cursor: pointer;
    position: relative;    
  }
  .day.selected {
    background-color: #b3d9ff;
  }
  .disabled {
    color: red;
    background-color: #FFD6D6;
    pointer-events: none;
  }
  .noselect {
    -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
    -khtml-user-select: none; /* Konqueror HTML */
    -moz-user-select: none; /* Firefox */
    -ms-user-select: none; /* Internet Explorer/Edge */
    user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome and Opera */
}
</style>
</head>
<body>

<h2>Calendario de Vacaciones 2025</h2>

<div id="calendar"></div>

<p>Total de días de vacaciones seleccionados: <span id="totalVacationDays">0</span></p>

<button onclick="saveSelection()">Guardar</button>
<button onclick="clearSelection()">Limpiar</button>

<script>
  // Array para almacenar los días seleccionados
  let selectedDays = {};

  // JSON con los valores de vacaciones para cada día del año 225
  const vacationValues = {
    "1-2": 0.9,
    "1-3": 0.875,
    "1-7": 1,
    "1-8": 1,
    "1-9": 1,
    "1-10": 0.875,
    "1-13": 1,
    "1-14": 1,
    "1-15": 1,
    "1-16": 1,
    "1-17": 0.875,
    "1-20": 1,
    "1-21": 1,
    "1-22": 1,
    "1-23": 1,
    "1-24": 0.875,
    "1-27": 1,
    "1-28": 1,
    "1-29": 1,
    "1-30": 1,
    "1-31": 0.875,
    "2-3": 1,
    "2-4": 1,
    "2-5": 1,
    "2-6": 1,
    "2-7": 0.875,
    "2-10": 1,
    "2-11": 1,
    "2-12": 1,
    "2-13": 1,
    "2-14": 0.875,
    "2-17": 1,
    "2-18": 1,
    "2-19": 1,
    "2-20": 1,
    "2-21": 0.875,
    "2-24": 1,
    "2-25": 1,
    "2-26": 1,
    "2-27": 1,
    "2-28": 0.875,
    "3-3": 1,
    "3-4": 1,
    "3-5": 1,
    "3-6": 1,
    "3-7": 0.875,
    "3-10": 1,
    "3-11": 1,
    "3-12": 1,
    "3-13": 1,
    "3-14": 0.875,
    "3-17": 1,
    "3-18": 1,
    "3-19": 1,
    "3-20": 1,
    "3-21": 0.875,
    "3-24": 1,
    "3-25": 1,
    "3-26": 1,
    "3-27": 1,
    "3-28": 0.875,
    "3-31": 1,
    "4-1": 1,
    "4-2": 1,
    "4-3": 1,
    "4-4": 0.875,
    "4-7": 1,
    "4-8": 1,
    "4-9": 1,
    "4-10": 1,
    "4-11": 0.875,
    "4-14": 0.9,
    "4-15": 0.9,
    "4-16": 0.9,
    "4-21": 0.9,
    "4-22": 1,
    "4-23": 1,
    "4-24": 1,
    "4-25": 0.875,
    "4-28": 0.9,
    "4-29": 0.9,
    "4-30": 0.9,
    "5-5": 1,
    "5-6": 1,
    "5-7": 1,
    "5-8": 1,
    "5-9": 0.875,
    "5-12": 1,
    "5-13": 1,
    "5-14": 1,
    "5-16": 0.875,
    "5-19": 1,
    "5-20": 1,
    "5-21": 1,
    "5-22": 1,
    "5-23": 0.875,
    "5-26": 1,
    "5-27": 1,
    "5-28": 1,
    "5-29": 1,
    "5-30": 0.875,
    "6-2": 1,
    "6-3": 1,
    "6-4": 1,
    "6-5": 1,
    "6-6": 0.875,
    "6-9": 1,
    "6-10": 1,
    "6-11": 1,
    "6-12": 1,
    "6-13": 0.875,
    "6-16": 1,
    "6-17": 1,
    "6-18": 1,
    "6-19": 1,
    "6-20": 0.875,
    "6-23": 1,
    "6-24": 1,
    "6-25": 1,
    "6-26": 1,
    "6-27": 0.875,
    "6-30": 1,
    "7-1": 0.875,
    "7-2": 0.875,
    "7-3": 0.875,
    "7-4": 0.875,
    "7-7": 0.875,
    "7-8": 0.875,
    "7-9": 0.875,
    "7-10": 0.875,
    "7-11": 0.875,
    "7-14": 0.875,
    "7-15": 0.875,
    "7-16": 0.875,
    "7-17": 0.875,
    "7-18": 0.875,
    "7-21": 0.875,
    "7-22": 0.875,
    "7-23": 0.875,
    "7-24": 0.875,
    "7-28": 0.875,
    "7-29": 0.875,
    "7-30": 0.875,
    "7-31": 0.875,
    "8-1": 0.875,
    "8-4": 0.875,
    "8-5": 0.875,
    "8-6": 0.875,
    "8-7": 0.875,
    "8-8": 0.875,
    "8-11": 0.875,
    "8-12": 0.875,
    "8-13": 0.875,
    "8-14": 0.875,
    "8-18": 0.875,
    "8-19": 0.875,
    "8-20": 0.875,
    "8-21": 0.875,
    "8-22": 0.875,
    "8-25": 0.875,
    "8-26": 0.875,
    "8-27": 0.875,
    "8-28": 0.875,
    "8-29": 0.875,
    "9-1": 1,
    "9-2": 1,
    "9-3": 1,
    "9-4": 1,
    "9-5": 0.875,
    "9-8": 1,
    "9-9": 1,
    "9-10": 1,
    "9-11": 1,
    "9-12": 0.875,
    "9-15": 1,
    "9-16": 1,
    "9-17": 1,
    "9-18": 1,
    "9-19": 0.875,
    "9-22": 1,
    "9-23": 1,
    "9-24": 1,
    "9-25": 1,
    "9-26": 0.875,
    "9-29": 1,
    "9-30": 1,
    "10-1": 1,
    "10-2": 1,
    "10-3": 0.875,
    "10-6": 1,
    "10-7": 1,
    "10-8": 1,
    "10-9": 1,
    "10-10": 0.875,
    "10-13": 1,
    "10-14": 1,
    "10-15": 1,
    "10-16": 1,
    "10-17": 0.875,
    "10-20": 1,
    "10-21": 1,
    "10-22": 1,
    "10-23": 1,
    "10-24": 0.875,
    "10-27": 1,
    "10-28": 1,
    "10-29": 1,
    "10-30": 1,
    "10-31": 0.875,
    "11-3": 1,
    "11-4": 1,
    "11-5": 1,
    "11-6": 1,
    "11-7": 0.875,
    "11-11": 1,
    "11-12": 1,
    "11-13": 1,
    "11-14": 0.875,
    "11-17": 1,
    "11-18": 1,
    "11-19": 1,
    "11-20": 1,
    "11-21": 0.875,
    "11-24": 1,
    "11-25": 1,
    "11-26": 1,
    "11-27": 1,
    "11-28": 0.875,
    "12-1": 1,
    "12-2": 1,
    "12-3": 1,
    "12-4": 1,
    "12-5": 0.875,
    "12-9": 1,
    "12-10": 1,
    "12-11": 1,
    "12-12": 0.875,
    "12-15": 1,
    "12-16": 1,
    "12-17": 1,
    "12-18": 1,
    "12-19": 0.875,
    "12-22": 0.9,
    "12-23": 0.9,
    "12-24": 0.5,
    "12-26": 0.875,
    "12-29": 0.9,
    "12-30": 0.9,
    "12-31": 0.5
  };

  // Función para obtener el índice de la columna de inicio para cada mes
  function getStartColumn(month, year) {
    const firstDayOfMonth = new Date(year, month, 1);
    const day = firstDayOfMonth.getDay();
    if (day == 0){
        return 6;
    } else {
        return firstDayOfMonth.getDay() - 1;
    }
  }

  // Función para actualizar el contador de días de vacaciones seleccionados
  function updateTotalVacationDays() {
    let total = 0;
    for (let day in selectedDays) {
      total += selectedDays[day];
    }
    document.getElementById('totalVacationDays').innerText = total;
  }

  // Función para manejar el clic en un día del calendario
  function toggleSelection(month, day, value) {
    const key = `${month}-${day}`;
    if (selectedDays[key]) {
      delete selectedDays[key];
    } else {
      selectedDays[key] = value;
    }
    const cell = document.getElementById(key);
    cell.classList.toggle('selected');
    updateTotalVacationDays();
  }

  // Generar el calendario
  function generateCalendar() {
    const calendar = document.getElementById('calendar');
    for (let month = 0; month < 12; month++) {
      const monthContainer = document.createElement('div');
      monthContainer.classList.add('month');
      
      const monthName = document.createElement('div');
      monthName.classList.add('month-name');
      monthName.textContent = new Date(2025, month, 1).toLocaleString('default', { month: 'long' });
      monthContainer.appendChild(monthName);
      
      const weekdaysContainer = document.createElement('div');
      weekdaysContainer.classList.add('weekdays');
      const weekdays = ['L', 'M', 'X', 'J', 'V', 'S', 'D'];
      weekdays.forEach(day => {
        const cell = document.createElement('div');
        cell.textContent = day;
        weekdaysContainer.appendChild(cell);
      });
      monthContainer.appendChild(weekdaysContainer);
      
      const daysContainer = document.createElement('div');
      daysContainer.classList.add('days');
      
      const startColumn = getStartColumn(month, 2025);
      debugger;
      for (let i = 0; i < startColumn; i++) {
        const emptyCell = document.createElement('div');
        daysContainer.appendChild(emptyCell);
      }
      
      const totalDays = new Date(2025, month + 1, 0).getDate();
      for (let day = 1; day <= totalDays; day++) {
        const cell = document.createElement('div');
        cell.textContent = day;
        cell.classList.add('day');
        cell.classList.add('noselect');
        const valueKey = `${month + 1}-${day}`;
        if (vacationValues[valueKey] === undefined || new Date(2025, month, day).getDay() === 0 || new Date(2025, month, day).getDay() === 6) {
          cell.classList.add('disabled');
          cell.title = "No se puede seleccionar este día";
        } else {
          cell.addEventListener('click', () => toggleSelection(month + 1, day, vacationValues[valueKey]));
          cell.setAttribute('title', `${vacationValues[valueKey]}`);
        }
        cell.id = `${month + 1}-${day}`;
        daysContainer.appendChild(cell);
      }
      
      monthContainer.appendChild(daysContainer);
      calendar.appendChild(monthContainer);
    }
  }

  // Función para guardar la selección en localStorage
  function saveSelection() {
    localStorage.setItem('selectedDays2025', JSON.stringify(selectedDays));
    alert('Selección guardada.');
  }

  // Función para cargar la selección desde localStorage al cargar la página
  function loadSelection() {
    const savedSelection = localStorage.getItem('selectedDays2025');
    if (savedSelection) {
      selectedDays = JSON.parse(savedSelection);
      // Actualizar la visualización de los días seleccionados
      for (let day in selectedDays) {
        const [month, dayOfMonth] = day.split('-');
        const cell = document.getElementById(`${month}-${dayOfMonth}`);
        if (cell) {
          cell.classList.add('selected');
        }
      }
      updateTotalVacationDays();
    }
  }

  // Función para limpiar la selección de días
  function clearSelection() {
    selectedDays = {};
    const selectedCells = document.querySelectorAll('.day.selected');
    selectedCells.forEach(cell => {
      cell.classList.remove('selected');
    });
    updateTotalVacationDays();
  }

  // Generar el calendario al cargar la página
  window.onload = function() {
    generateCalendar();
    loadSelection();
  };
</script>

</body>
</html>
